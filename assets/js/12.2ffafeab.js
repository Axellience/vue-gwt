(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{272:function(e,t,s){"use strict";s.r(t);var a=s(29),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"custom-directives"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-directives"}},[e._v("#")]),e._v(" Custom Directives")]),e._v(" "),s("p",[s("em",[e._v("This page comes from the "),s("a",{attrs:{href:"https://vuejs.org/v2/guide/custom-directive.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("official Vue.js documentation"),s("OutboundLink")],1),e._v(" and has been adapted for Vue GWT.")])]),e._v(" "),s("h2",{attrs:{id:"intro"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#intro"}},[e._v("#")]),e._v(" Intro")]),e._v(" "),s("p",[e._v("In addition to the default set of directives shipped in core ("),s("code",[e._v("v-model")]),e._v(" and "),s("code",[e._v("v-show")]),e._v("), Vue also allows you to register your own custom directives.\nNote that in Vue 2.0, the primary form of code reuse and abstraction is components - however there may be cases where you just need some low-level DOM access on plain elements, and this is where custom directives would still be useful.\nAn example would be focusing on an input element, like this one:")]),e._v(" "),s("div",{staticClass:"example-container",attrs:{"data-name":"focusDirectiveComponent"}},[s("span",{attrs:{id:"focusDirectiveComponent"}})]),e._v(" "),s("p",[e._v("When the page loads, that element gains focus (note: autofocus doesn't work on mobile Safari).\nIn fact, if you haven't clicked on anything else since visiting this page, the input above should be focused now.\nNow let's build the directive that accomplishes this.")]),e._v(" "),s("p",[e._v("Fist we declare a Java class, like for our Components.\nExcept that we extend "),s("code",[e._v("VueDirective")]),e._v(" and add the "),s("code",[e._v("@Directive")]),e._v(" annotation.")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Directive")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("FocusDirective")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("extends")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("VueDirective")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Override")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("inserted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Element")]),e._v(" el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("VueDirectiveBinding")]),e._v(" binding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("focus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("We can then register our Directive globally:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("VueGwtExamplesApp")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("implements")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("EntryPoint")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("onModuleLoad")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("FocusDirectiveOptions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("The name of our directive is determined by the Class name (same as Component).\nSo in this case the directive will be named "),s("code",[e._v("v-focus")]),e._v(".\nFor "),s("code",[e._v("FocusAndHighlightDirective")]),e._v(" the name would have been "),s("code",[e._v("v-focus-and-highlight")]),e._v(".")]),e._v(" "),s("p",[e._v("If you want to register a directive locally instead, the "),s("code",[e._v("@Component")]),e._v(" also accept a "),s("code",[e._v("directives")]),e._v(" option:")]),e._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("directives "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("FocusDirective")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("FocusDirectiveComponent")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("implements")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("IsVueComponent")]),e._v("\n")])])]),s("p",[e._v("Then in a template, you can use the new "),s("code",[e._v("v-focus")]),e._v(" attribute on any element, like this:")]),e._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("input")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("v-focus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),s("h2",{attrs:{id:"hook-functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hook-functions"}},[e._v("#")]),e._v(" Hook Functions")]),e._v(" "),s("p",[e._v("A directive definition object can override several hook functions (all optional):")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("bind")]),e._v(": called only once, when the directive is first bound to the element.\nThis is where you can do one-time setup work.")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("inserted")]),e._v(": called when the bound element has been inserted into its parent node (this only guarantees parent node presence, not necessarily in-document).")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("update")]),e._v(": called after the containing component has updated, "),s("strong",[e._v("but possibly before its children have updated")]),e._v(".\nThe directive's value may or may not have changed, but you can skip unnecessary updates by comparing the binding's current and old values (see below on hook arguments).")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("componentUpdated")]),e._v(": called after the containing component "),s("strong",[e._v("and its children")]),e._v(" have updated.")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("unbind")]),e._v(": called only once, when the directive is unbound from the element.")])])]),e._v(" "),s("p",[e._v("We'll explore the arguments passed into these hooks (i.e. "),s("code",[e._v("el")]),e._v(" and "),s("code",[e._v("binding")]),e._v(") in the next section.")]),e._v(" "),s("h2",{attrs:{id:"directive-hook-arguments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#directive-hook-arguments"}},[e._v("#")]),e._v(" Directive Hook Arguments")]),e._v(" "),s("p",[e._v("Directive hooks are passed these arguments:")]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("el")]),e._v(": The element the directive is bound to. This can be used to directly manipulate the DOM.")]),e._v(" "),s("li",[s("strong",[e._v("binding")]),e._v(": An object containing the following properties.\n"),s("ul",[s("li",[s("strong",[e._v("name")]),e._v(": The name of the directive, without the "),s("code",[e._v("v-")]),e._v(" prefix.")]),e._v(" "),s("li",[s("strong",[e._v("value")]),e._v(": The value passed to the directive. For example in "),s("code",[e._v('v-my-directive="1 + 1"')]),e._v(", the value would be "),s("code",[e._v("2")]),e._v(".")]),e._v(" "),s("li",[s("strong",[e._v("oldValue")]),e._v(": The previous value, only available in "),s("code",[e._v("update")]),e._v(" and "),s("code",[e._v("componentUpdated")]),e._v(". It is available whether or not the value has changed.")]),e._v(" "),s("li",[s("strong",[e._v("expression")]),e._v(": The expression of the binding as a string. For example in "),s("code",[e._v('v-my-directive="1 + 1"')]),e._v(", the expression would be "),s("code",[e._v('"1 + 1"')]),e._v(".")]),e._v(" "),s("li",[s("strong",[e._v("arg")]),e._v(": The argument passed to the directive, if any. For example in "),s("code",[e._v("v-my-directive:foo")]),e._v(", the arg would be "),s("code",[e._v('"foo"')]),e._v(".")]),e._v(" "),s("li",[s("strong",[e._v("modifiers")]),e._v(": An object containing modifiers, if any. For example in "),s("code",[e._v("v-my-directive.foo.bar")]),e._v(", the modifiers object would be "),s("code",[e._v("{ foo: true, bar: true }")]),e._v(".")])])]),e._v(" "),s("li",[s("strong",[e._v("vnode")]),e._v(": The virtual node produced by Vue’s compiler. See the "),s("a",{attrs:{href:"https://vuejs.org/v2/api/#VNode-Interface",target:"_blank",rel:"noopener noreferrer"}},[e._v("VNode API"),s("OutboundLink")],1),e._v(" for full details.")]),e._v(" "),s("li",[s("strong",[e._v("oldVnode")]),e._v(": The previous virtual node, only available in the "),s("code",[e._v("update")]),e._v(" and "),s("code",[e._v("componentUpdated")]),e._v(" hooks.")])]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("Apart from "),s("code",[e._v("el")]),e._v(", you should treat these arguments as read-only and never modify them.\nIf you need to share information across hooks, it is recommended to do so through element's "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dataset",target:"_blank",rel:"noopener noreferrer"}},[e._v("dataset"),s("OutboundLink")],1),e._v(".")])]),e._v(" "),s("p",[e._v("You can see an "),s("a",{attrs:{href:"https://vuejs.org/v2/guide/custom-directive.html#Directive-Hook-Arguments",target:"_blank",rel:"noopener noreferrer"}},[e._v("example of these arguments values"),s("OutboundLink")],1),e._v(" in the official Vue.js doc.")]),e._v(" "),s("h2",{attrs:{id:"object-literals"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-literals"}},[e._v("#")]),e._v(" Object Literals")]),e._v(" "),s("p",[e._v("If your directive needs multiple values, you can also pass in a JSON object literal.")]),e._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[e._v('<div v-demo=\'{ color: "\\"white\\"", text: "\\"hello!\\"" }>'),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Override")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("inserted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Element")]),e._v(" el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("VueDirectiveBinding")]),e._v(" binding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("JsObject")]),e._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("JsObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" binding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"color"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// white")]),e._v("\n    value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"text"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// hello!")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);